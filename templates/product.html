{% extends "base.html" %}

{% block html %}
    <link rel="stylesheet" href="{{ dated_url_for('static', filename='css/product.css') }}">
{% endblock %}

{% block body %}
    <div class="product__container">
        <div class="product__content">
            <span class="title">Seller's product <span style="color: var(--accent);">[{{ get_user(seller_id).username }}]</span></span>
            <div class="product__information">
                <div class="product__information__left">
                    <div class="seller__information">
                        <div class="seller__avatar__container">
                            <img src="{{ get_avatar_path(seller_id) }}">
                        </div>
                        <div class="seller__information__content">
                            <div class="header">
                                <img src="{{ url_for('static', filename='svg/bxs_badge-check.svg') }}" onerror="this.style.display='none'">
                                <span class="title">{{ get_user(seller_id).username }}</span>
                                <div class="style_dot"></div>
                                <span class="status">{{ get_user(seller_id).status }}</span>
                            </div>
                            <span class="description">{{ get_user(seller_id).short_bio }}</span>
                        </div>
                    </div>
                    <span class="title">{{ get_product(product_id).category }} <span style="color: var(--accent);">{{ get_product(product_id).name }}</span></span>
                    {% if get_product(product_id).pin %}
                    <div class="product__tag">
                        <img src="{{ url_for('static', filename='svg/comet (2) 1.svg') }}" onerror="this.style.display='none'">
                        <span>Exclusive</span>
                    </div>
                    {% endif %}
                    <div class="seperator"></div>
                    <span class="title">Description</span>
                    <span id="product_desc" class="description">{{ get_product(product_id).description }}</span>
                    <div class="seperator"></div>   
                    {% if
                        get_user(seller_id).tg_link != "None" and object_len(get_user(seller_id).tg_link) > 0
                        and get_user(seller_id).ds_link != "None" and object_len(get_user(seller_id).ds_link) > 0
                        and get_user(seller_id).yt_link != "None" and object_len(get_user(seller_id).yt_link) > 0
                    %}
                    <span class="title">seller contact</span>
                    {% if get_user(seller_id).tg_link != "None" and object_len(get_user(seller_id).tg_link) > 0 %}
                    <div onclick="copyToClipboard('{{ get_user(seller_id).tg_link }}')" class="contact_button">
                        <div class="fast_wrap">
                            <img src="{{ url_for('static', filename='svg/akar-icons_telegram-fill.svg') }}" onerror="this.style.display='none'">
                            <span>{{ get_user(seller_id).tg_link }}</span>
                        </div>
                        <img src="{{ url_for('static', filename='svg/majesticons_open.svg') }}" onerror="this.style.display='none'">
                    </div>
                    {% endif %}
                    {% if get_user(seller_id).ds_link != "None" and object_len(get_user(seller_id).ds_link) > 0 %}
                    <div onclick="copyToClipboard('{{ get_user(seller_id).ds_link }}')" class="contact_button">
                        <div class="fast_wrap">
                            <img src="{{ url_for('static', filename='svg/discord.svg') }}" onerror="this.style.display='none'">
                            <span>{{ get_user(seller_id).ds_link }}</span>
                        </div>
                        <img src="{{ url_for('static', filename='svg/majesticons_open.svg') }}" onerror="this.style.display='none'">
                    </div>
                    {% endif %}
                    {% if get_user(seller_id).yt_link != "None" and object_len(get_user(seller_id).yt_link) > 0 %}
                    <div onclick="window.open('{{ get_user(seller_id).yt_link }}', '_blank')" class="contact_button">
                        <div class="fast_wrap">
                            <img src="{{ url_for('static', filename='svg/youtube.svg') }}" onerror="this.style.display='none'">
                            <span>{{ get_user(seller_id).yt_link }}</span>
                        </div>
                        <img src="{{ url_for('static', filename='svg/majesticons_open.svg') }}" onerror="this.style.display='none'">
                    </div>
                    {% endif %}
                    <div class="seperator"></div>
                    {% endif %}
                    <button class="create__ticket__button redirect-button" href="/profile/create-ticket/{{ seller_id }}">
                        <span>Open a ticket</span>
                    </button>
                </div>
                <div class="product__information__right">
                    <div class="main__image__preview">
                        {% if get_product(product_id).link_to_video %}
                        <iframe src="{{ get_product(product_id).link_to_video }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        {% else %}
                        <img src="{{ url_for('static', filename='uploads/') }}{{ get_product(product_id).image1 }}" onerror="this.style.display='none'">
                        {% endif %}
                    </div>
                    <div class="all_images__container">
                        <div class="all__image__container">
                            <img onclick="toggleFullscreen(this)" src="{{ url_for('static', filename='uploads/') }}{{ get_product(product_id).image1 }}" onerror="this.style.display='none'">
                        </div>
                        <div class="all__image__container">
                            <img onclick="toggleFullscreen(this)" src="{{ url_for('static', filename='uploads/') }}{{ get_product(product_id).image2 }}" onerror="this.style.display='none'">
                        </div>
                        <div class="all__image__container">
                            <img onclick="toggleFullscreen(this)" src="{{ url_for('static', filename='uploads/') }}{{ get_product(product_id).image3 }}" onerror="this.style.display='none'">
                        </div>
                    </div>
                    <div class="buy__notify">
                        <span class="title redirect-button" style="cursor: pointer;" href="/profile/general_information">After purchasing, you will receive a link to install the source code in your<span style="color: var(--accent); text-decoration: underline;">personal account.</span></span>
                    </div>
                    {% if get_product(product_id).in_stock != 0 %}
                    <button class="create__ticket__button redirect-button" href="/purchase/{{ product_id }}">
                        <span>Purchase</span>
                    </button>
                    {% else %}
                    <div style="text-transform: uppercase; background-color: var(--child); border-radius: 8px; border: 1px solid var(--border); width: 100%; height: 70px; display: flex; align-items: center; justify-content: center; color: var(--white); font-size: 15px; font-weight: 600;">out of stock at the moment</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div id="fullscreenModal" class="modal" onclick="closeFullscreen()">
        <img class="modal-content" id="fullscreenImage">
    </div>

{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='js/product.js') }}"></script>
    <script src="{{ url_for('static', filename='js/product_desc.js') }}"></script>
    <script src="{{ url_for('static', filename='js/copy_to_clipboard.js') }}"></script>
{% endblock %}