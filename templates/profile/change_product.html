{% extends "profile_base.html" %}

{% block my_products_tab %}active{% endblock %}

{% block menu %}
    <span class="title">Product creation</span>
    <form action="{{ product_id }}" method="post" class="profile__flex__column__content" enctype="multipart/form-data">
                <div class="profile__flex__wrap__content">
            <div class="input__text">
                <span>Product category</span>
                <input type="text" name="category" value="{{ get_product(product_id).category }}" required>
            </div>
            <div class="input__text">
                <span>Product name</span>
                <input type="text" name="name" value="{{ get_product(product_id).name }}" required>
            </div>
        </div>
        <div class="profile__flex__wrap__content">
            <div class="input__text">
                <span>In stock</span>
                <input type="number" name="in_stock" value="{{ get_product(product_id).in_stock }}" required>
            </div>
            <div class="input__text">
                <span>Price</span>
                <input type="number" id="price" name="price" step="0.01" value="{{ get_product(product_id).price }}" required>
            </div>
        </div>
        <div class="input__text">
            <span>Your product description</span>
            <textarea name="description" required>{{ get_product(product_id).description }}</textarea>
        </div>
        <div class="seperator"></div>
        <span class="title">Visual component</span>
        <span class="description" style="margin-bottom: -10px;">Your installed preview images</span>
        <div class="profile__flex__wrap__content">
            <div class="input__media">
                <input type="file" name="preview_image1" accept="image/*" onchange="previewImage(this, 'preview_image1')">
                <img id="preview_image1" src="{{ url_for('static', filename='uploads/') }}{{ get_product(product_id).image1 }}" onerror="this.style.display='none'">
                <button href="/profile/delete-product-image/{{ product_id }}/1" class="redirect-button">
                    <img src="{{ url_for('static', filename='svg/cross-circle 2.svg') }}" onerror="this.style.display='none'">
                </button>
            </div>
            <div class="input__media">
                <input type="file" name="preview_image2" accept="image/*" onchange="previewImage(this, 'preview_image2')">
                <img id="preview_image2" src="{{ url_for('static', filename='uploads/') }}{{ get_product(product_id).image2 }}" onerror="this.style.display='none'">
                <button href="/profile/delete-product-image/{{ product_id }}/2" class="redirect-button">
                    <img src="{{ url_for('static', filename='svg/cross-circle 2.svg') }}" onerror="this.style.display='none'">
                </button>
            </div>
            <div class="input__media">
                <input type="file" name="preview_image3" accept="image/*" onchange="previewImage(this, 'preview_image3')">
                <img id="preview_image3" src="{{ url_for('static', filename='uploads/') }}{{ get_product(product_id).image3 }}" onerror="this.style.display='none'">
                <button href="/profile/delete-product-image/{{ product_id }}/3" class="redirect-button">
                    <img src="{{ url_for('static', filename='svg/cross-circle 2.svg') }}" onerror="this.style.display='none'">
                </button>
            </div>
        </div>
        <div class="input__text">
            <span>Your link to the video</span>
            <input type="text" name="video_link" value="{{ get_product(product_id).link_to_video }}">
        </div>
        <div class="seperator"></div>
        <span class="title">Source for delivery</span>
        <span class="description" style="margin-bottom: -10px;">Upload your product that the client will receive after payment.</span>
        <div id="fileInputDiv" class="input__media {% if object_len(get_product(product_id).filename) > 0 %}success{% endif %}" style="height: 150px;">
            <input id="fileInput" type="file" name="filename">
        </div>
        <div class="seperator"></div>
        <input class="profile__submit__button" type="submit" value="Save changes">
    </form>
{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='js/create_product.js') }}"></script>
    <script src="{{ url_for('static', filename='js/profile.js')}}"></script>
{% endblock %}